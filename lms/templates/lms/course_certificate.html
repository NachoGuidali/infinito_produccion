{% extends "lms/base.html" %}
{% load static %}

{% block title %}Diploma ‚Äî {{ course.title }}{% endblock %}

{% block content %}
<style>
@media print {

  @page {
    size: A4 landscape;
    margin: 0;
  }

  html, body {
    width: 297mm;
    height: 210mm;
    margin: 0;
    padding: 0;
    overflow: hidden;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
    body {
    margin: 0 !important;
    padding: 0 !important;
  }

  /* üî• ELIMINAMOS TODO LO QUE ENVUELVE */
  body > div {
    display: none !important;
  }

  body * {
    visibility: hidden;
  }

  #certificado,
  #certificado * {
    visibility: visible;
  }

  #certificado {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;

    max-width: none !important; 
    width: 297mm !important;

    height: 210mm !important;

    margin: 0 !important;
    padding: 0 !important;

    border-radius: 0 !important;
    box-shadow: none !important;
  }
  .certificado-inner {
    width: 100%;
    height: 100%;
    padding: 22mm 28mm 18mm;
    box-sizing: border-box;
  }

  .no-print {
    display: none !important;
  }
}
</style>


<div style="display:flex; justify-content:center;">
  <div style="width:100%; max-width:1100px;">

    <div id="certificado" style="
       position:relative;
        width:100%;
        max-width:1100px;
        padding:40px 60px 80px;
        background:#ffffff;
        border-radius:28px;
        box-shadow:0 20px 60px rgba(0,0,0,.18);
        overflow:hidden;
        background: linear-gradient(135deg, #ffe6f2 0%, #ffeef9 30%, #fdfbff 55%, #e6f7ff 100%);
          ">

      <div style="
        position:absolute;
        inset:0;
        background-image: url('{% static 'media/certificado_fondo.jpeg' %}');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        z-index:0;
      "></div>

      <div class="certificado-inner" style="position:relative; z-index:1;">
        {# CABECERA CON LOGO Y TEXTO #}
        <div style="display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:40px;">
          <div style="display:flex; align-items:center; gap:12px;">
            <img src="{% static 'lms/logo_infinito.png' %}"
                 alt="Infinito Centro de Capacitaci√≥n"
                 style="height:150px; width:auto; object-fit:contain;">
          </div>

          <div style="text-align:right; font-size:13px; color:#444; max-width:260px;">
            <div style="font-weight:600; letter-spacing:.18em; text-transform:uppercase;">
              INFINITO
            </div>
            <div style="font-weight:500; letter-spacing:.12em; text-transform:uppercase;">
              CENTRO DE CAPACITACI√ìN
            </div>
          </div>
        </div>

        {# T√çTULO CENTRAL #}
        <div style="text-align:center; margin-bottom:34px;">
          <div style="letter-spacing:.20em; font-size:13px; text-transform:uppercase; color:#333; margin-bottom:10px;">
            INFINITO CENTRO DE CAPACITACI√ìN
          </div>
          <div style="font-size:16px; font-weight:600; margin-bottom:6px;">
            Certifica que
          </div>
        </div>

        {# NOMBRE #}
        <div style="text-align:center; margin-bottom:24px;">
          <div style="
            font-size:26px;
            font-weight:700;
            border-bottom:1px solid #333;
            padding-bottom:4px;
            display:inline-block;
            min-width:260px;
          ">
            {{ user_fullname }}
          </div>
        </div>

        {# TEXTO DEL CURSO #}
        <div style="text-align:center; font-size:16px; color:#222; line-height:1.6; margin-bottom:26px;">
          ha rendido las pruebas te√≥rico-pr√°cticas del curso de
          <br>
          <span style="display:inline-block; margin-top:10px; font-weight:700; font-size:20px;">
            {{ course.title }}
          </span>
          <br>
          <span style="display:inline-block; margin-top:10px;">
            complet√°ndolo satisfactoriamente.
          </span>
        </div>

        {# LUGAR Y FECHA #}
        <div style="text-align:center; font-size:15px; margin:30px 0 40px; color:#333;">
          Lugar y fecha:
          <span style="font-weight:600;">
            Buenos Aires, {{ completion_date|date:"d/m/Y" }}
          </span>
        </div>

        {# FIRMA + LOGOS INFERIORES #}
        <div style="display:flex; justify-content:space-between; align-items:flex-end; gap:24px; margin-top:30px;">
          <div style="text-align:center; flex:1;">
            <img src="{% static 'lms/firma_maria_alejandra.png' %}"
                 alt="Firma Mar√≠a Alejandra Torcianti"
                 style="height:150px; object-fit:contain; margin-bottom:4px;">
            <div style="border-top:1px solid #000; width:80%; margin:0 auto 4px;"></div>
            <div style="font-size:13px; font-weight:600;">Mar√≠a Alejandra Torcianti</div>
            <div style="font-size:12px;">Facilitadora</div>
          </div>

          <div style="flex:1; display:flex; justify-content:flex-end; gap:20px; align-items:center;">
            <img src="{% static 'lms/logo_fapya.png' %}" alt="Infinito" style="height:150px; object-fit:contain;">
            <img src="{% static 'lms/logo_aceyba.png' %}" alt="ACYEBA" style="height:150px; object-fit:contain;">
          </div>
        </div>

        {# BOT√ìN IMPRIMIR / GUARDAR PDF #}
        <div style="margin-top:40px; text-align:center;">
          <button class="no-print" type="button"
                  onclick="window.print()"
                  style="
                    padding:10px 22px;
                    border-radius:999px;
                    border:0;
                    background:var(--color-boton);
                    color:#fff;
                    font-size:14px;
                    cursor:pointer;
                  ">
            Imprimir / Guardar como PDF
          </button>
        </div>
      </div>
    </div>

  </div>
</div>
{% endblock %}
